echo; echo "Checking for WP..."; if [ -f  wp-config.php ]; then echo "Wordpress check passed." ; echo; db_pref=`grep table_prefix wp-config.php | awk -F"'" '{print$2}'`; DB_USER=$(grep "DB_USER" `pwd`/wp-config.php |awk -F\' '{print $4}'); DB_PASS=$(grep "DB_PASSWORD" `pwd`/wp-config.php |awk -F\' '{print $4}'); DB_NAME=$(grep "DB_NAME" `pwd`/wp-config.php |awk -F\' '{print $4}') ; DB_HOST=$(grep "DB_HOST" `pwd`/wp-config.php |awk -F\' '{print $4}'); data=$(mysql -u$DB_USER -p$DB_PASS -h$DB_HOST $DB_NAME -e"select option_value from ${db_pref}options where option_name='active_plugins';"); echo -e "Active Plugins:" ; a=$(echo $data | awk '{print $2}' |cut -d\{ -f2 |sed 's/;/ /g'|fmt -w 4|grep 's:' |awk -F\" '{print$2}';) ; x=1 ; for i in $a ; do echo $x. $i ; eval plugin$x=$i ; x=$((x+1)) ; done ; echo -ne "Type the number of the plugin you wish to disable: " ; read ; plugin_activate=$(eval echo "\$plugin$REPLY") ; test1=$(echo $data | grep \"$plugin_activate\") ; en_data=$(echo $data|awk '{print $2}' |cut -d\{ -f2 |sed 's/;/ /g'|fmt -w 4|grep 'i:' |wc -l) ; query=$(echo $data |awk '{print $2}' |sed "s/a:$en_data:/a:`expr $en_data - 1`:/" | sed -e "s|i:[0-9]*;s:[0-9]*:\"$plugin_activate\";||") ; mysql -h$DB_HOST -u$DB_USER -p$DB_PASS -vve "use $DB_NAME; update wp_options set option_value='$query' where option_name='active_plugins';" >/dev/null ; echo ; echo "$plugin_activate Disabled." ; else echo WordPress not found. ; fi ; echo

-- Disables single plugin on wp site, it will print out full list of plugins and prompt you to select which one to disable by typing in the number.
